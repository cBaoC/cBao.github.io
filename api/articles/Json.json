{"title":"Json","uid":"ae911ea8c615446cd5e6fd02771c3f77","slug":"Json","date":"2022-08-02T06:17:49.000Z","updated":"2022-08-02T14:01:10.895Z","comments":true,"path":"api/articles/Json.json","keywords":null,"cover":"https://cbaoblog.oss-cn-shanghai.aliyuncs.com/Json_LOGO.png","content":"<h2 id=\"JSON-语法规则\"><a href=\"#JSON-语法规则\" class=\"headerlink\" title=\"JSON 语法规则\"></a>JSON 语法规则</h2><ul>\n<li>数据在<strong>键/值</strong>对中</li>\n<li>数据由逗号 <strong>,</strong> 分隔</li>\n<li>使用斜杆来转义 \\ <strong>字符</strong></li>\n<li>大括号 <strong>{}</strong> 保存<strong>对象</strong></li>\n<li>中括号 <strong>[]</strong> 保存<strong>数组</strong>，数组可以包含多个对象</li>\n</ul>\n<h2 id=\"JSON-键值对\"><a href=\"#JSON-键值对\" class=\"headerlink\" title=\"JSON 键值对\"></a>JSON 键值对</h2><p>JSON 数据的书写格式是：</p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token property\">\"name\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"cBao\"</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"JSON-值可以是\"><a href=\"#JSON-值可以是\" class=\"headerlink\" title=\"JSON 值可以是\"></a>JSON 值可以是</h2><ul>\n<li><p>数字（整数或浮点数）</p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span><span class=\"token number\">30</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li><p>字符串（在双引号中）</p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"cBao\"</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li><p>逻辑值（true 或 false）</p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token property\">\"IsDeath\"</span><span class=\"token operator\">:</span><span class=\"token boolean\">false</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li><p>数组（在中括号中）</p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token punctuation\">&#123;</span>\n    <span class=\"token property\">\"Info\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">&#123;</span> <span class=\"token property\">\"age1\"</span><span class=\"token operator\">:</span><span class=\"token number\">30</span> <span class=\"token punctuation\">,</span> <span class=\"token property\">\"name1\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"cBao\"</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> \n    <span class=\"token punctuation\">&#123;</span> <span class=\"token property\">\"age2\"</span><span class=\"token operator\">:</span><span class=\"token number\">30</span> <span class=\"token punctuation\">,</span> <span class=\"token property\">\"name2\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"cBao\"</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span> \n    <span class=\"token punctuation\">&#123;</span> <span class=\"token property\">\"age3\"</span><span class=\"token operator\">:</span><span class=\"token number\">30</span> <span class=\"token punctuation\">,</span> <span class=\"token property\">\"name3\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"cBao\"</span> <span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><p>对象（在大括号中）</p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token punctuation\">&#123;</span>\n  <span class=\"token property\">\"Object\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span>\n      <span class=\"token property\">\"age\"</span><span class=\"token operator\">:</span><span class=\"token number\">30</span><span class=\"token punctuation\">,</span> \n    <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"cBao\"</span> \n  <span class=\"token punctuation\">&#125;</span>  \n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><p>null</p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token property\">\"runoob\"</span><span class=\"token operator\">:</span><span class=\"token null keyword\">null</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n</ul>\n<h2 id=\"UE5中将结构体转换成Json示例\"><a href=\"#UE5中将结构体转换成Json示例\" class=\"headerlink\" title=\"UE5中将结构体转换成Json示例\"></a>UE5中将结构体转换成Json示例</h2><ul>\n<li><p>.Build.cs文件需要加入</p>\n<pre class=\"line-numbers language-csharp\" data-language=\"csharp\"><code class=\"language-csharp\">PrivateDependencyModuleNames<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Json\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n<li><p>.h文件</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Fill out your copyright notice in the Description page of Project Settings.</span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\">once</span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"CoreMinimal.h\"</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Kismet/BlueprintFunctionLibrary.h\"</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"StructToJson.generated.h\"</span></span>\n\n<span class=\"token function\">USTRUCT</span><span class=\"token punctuation\">(</span>BlueprintType<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">FMyInfo</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span>BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\tFString Name<span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span>BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\tint32 Age<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n\n<span class=\"token function\">USTRUCT</span><span class=\"token punctuation\">(</span>BlueprintType<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">struct</span> <span class=\"token class-name\">FMyStruct</span>\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\t\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span>BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\tFString Name<span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span>BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\tint32 Age<span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span>BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">bool</span> Gender<span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span>BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">float</span> Weight<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span>BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\tFMyInfo Info<span class=\"token punctuation\">;</span>\n\t\n\t<span class=\"token function\">UPROPERTY</span><span class=\"token punctuation\">(</span>EditAnywhere<span class=\"token punctuation\">,</span>BlueprintReadWrite<span class=\"token punctuation\">)</span>\n\tTArray<span class=\"token operator\">&lt;</span>FMyInfo<span class=\"token operator\">></span> Array<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/**\n * \n */</span>\n<span class=\"token function\">UCLASS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">UE_ADVANCE_API</span> UStructToJson <span class=\"token operator\">:</span> <span class=\"token keyword\">public</span> UBlueprintFunctionLibrary\n<span class=\"token punctuation\">&#123;</span>\n\t<span class=\"token function\">GENERATED_BODY</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\t<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span>BlueprintCallable<span class=\"token punctuation\">,</span>Category<span class=\"token operator\">=</span>cBao<span class=\"token punctuation\">)</span>\n\t<span class=\"token keyword\">static</span> FString <span class=\"token function\">StructToString</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> FMyStruct<span class=\"token operator\">&amp;</span> s1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><p>.cpp文件</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// Fill out your copyright notice in the Description page of Project Settings.</span>\n\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"StructToJson.h\"</span></span>\n\nFString <span class=\"token class-name\">UStructToJson</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">StructToString</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> FMyStruct<span class=\"token operator\">&amp;</span> s1<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\t\tFString JsonString<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">//UE中的Json工程模式</span>\n\t\tTSharedPtr<span class=\"token operator\">&lt;</span>TJsonWriter<span class=\"token operator\">&lt;</span>TCHAR<span class=\"token punctuation\">,</span>TCondensedJsonPrintPolicy<span class=\"token operator\">&lt;</span>TCHAR<span class=\"token operator\">>></span><span class=\"token operator\">></span> JsonWriter<span class=\"token operator\">=</span><span class=\"token class-name\">TJsonWriterFactory</span><span class=\"token operator\">&lt;</span>TCHAR<span class=\"token punctuation\">,</span>TCondensedJsonPrintPolicy<span class=\"token operator\">&lt;</span>TCHAR<span class=\"token operator\">>></span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Create</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>JsonString<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteObjectStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteValue</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>s1<span class=\"token punctuation\">.</span>Name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteValue</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Age\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>s1<span class=\"token punctuation\">.</span>Age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteValue</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Gender\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>s1<span class=\"token punctuation\">.</span>Gender<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteValue</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Weight\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>s1<span class=\"token punctuation\">.</span>Weight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteObjectStart</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Info\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteValue</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>s1<span class=\"token punctuation\">.</span>Info<span class=\"token punctuation\">.</span>Name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteValue</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Age\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>s1<span class=\"token punctuation\">.</span>Info<span class=\"token punctuation\">.</span>Age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteObjectEnd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteArrayStart</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Array\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> <span class=\"token operator\">&amp;</span> s<span class=\"token operator\">:</span>s1<span class=\"token punctuation\">.</span>Array<span class=\"token punctuation\">)</span>\n\t\t\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteObjectStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\t\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteValue</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">.</span>Name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteValue</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Age\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">.</span>Age<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteObjectEnd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteArrayEnd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">WriteObjectEnd</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tJsonWriter<span class=\"token operator\">-></span><span class=\"token function\">Close</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> JsonString<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span>\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n<li><p>蓝图中配置输出</p>\n<pre class=\"line-numbers language-json\" data-language=\"json\"><code class=\"language-json\"><span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"Name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"cBao\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"Age\"</span><span class=\"token operator\">:</span><span class=\"token number\">24</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"Gender\"</span><span class=\"token operator\">:</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"Weight\"</span><span class=\"token operator\">:</span><span class=\"token number\">2222</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"Info\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"Name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"ccc\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"Age\"</span><span class=\"token operator\">:</span><span class=\"token number\">32324</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"Array\"</span><span class=\"token operator\">:</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"Name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"cdd\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"Age\"</span><span class=\"token operator\">:</span><span class=\"token number\">22131</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">&#123;</span><span class=\"token property\">\"Name\"</span><span class=\"token operator\">:</span><span class=\"token string\">\"dsaf\"</span><span class=\"token punctuation\">,</span><span class=\"token property\">\"Age\"</span><span class=\"token operator\">:</span><span class=\"token number\">232</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre></li>\n</ul>\n<h2 id=\"UE5中将Json转换成结构体示例\"><a href=\"#UE5中将Json转换成结构体示例\" class=\"headerlink\" title=\"UE5中将Json转换成结构体示例\"></a>UE5中将Json转换成结构体示例</h2><ul>\n<li><p>.h文件</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token comment\">//FString反序列化成结构体</span>\n<span class=\"token function\">UFUNCTION</span><span class=\"token punctuation\">(</span>BlueprintCallable<span class=\"token punctuation\">,</span>Category<span class=\"token operator\">=</span>cBao<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">static</span> <span class=\"token keyword\">bool</span> <span class=\"token function\">StructFromFString</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> FString<span class=\"token operator\">&amp;</span> s1<span class=\"token punctuation\">,</span>FMyStruct<span class=\"token operator\">&amp;</span> MyStruct<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre></li>\n<li><p>.cpp文件</p>\n<pre class=\"line-numbers language-cpp\" data-language=\"cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">bool</span> <span class=\"token class-name\">UStructToJson</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">StructFromFString</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> FString<span class=\"token operator\">&amp;</span> s1<span class=\"token punctuation\">,</span> FMyStruct<span class=\"token operator\">&amp;</span> MyStruct<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">&#123;</span>\n\tTSharedRef<span class=\"token operator\">&lt;</span>TJsonReader<span class=\"token operator\">&lt;</span><span class=\"token operator\">>></span> JsonReader<span class=\"token operator\">=</span><span class=\"token class-name\">TJsonReaderFactory</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">></span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Create</span><span class=\"token punctuation\">(</span>s1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tTSharedPtr<span class=\"token operator\">&lt;</span>FJsonObject<span class=\"token operator\">></span> ReadRoot<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">FJsonSerializer</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Deserialize</span><span class=\"token punctuation\">(</span>JsonReader<span class=\"token punctuation\">,</span>ReadRoot<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">&#123;</span>\n\t\t<span class=\"token comment\">//获得String数据</span>\n\t\tMyStruct<span class=\"token punctuation\">.</span>Name<span class=\"token operator\">=</span>ReadRoot<span class=\"token operator\">-></span><span class=\"token function\">GetStringField</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n\t\t<span class=\"token comment\">//获得int数据</span>\n\t\tMyStruct<span class=\"token punctuation\">.</span>Age<span class=\"token operator\">=</span>ReadRoot<span class=\"token operator\">-></span><span class=\"token function\">GetIntegerField</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Age\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n\t\t<span class=\"token comment\">//获得bool数据</span>\n\t\tMyStruct<span class=\"token punctuation\">.</span>Gender<span class=\"token operator\">=</span>ReadRoot<span class=\"token operator\">-></span><span class=\"token function\">GetBoolField</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Gender\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n\t\t<span class=\"token comment\">//获得浮点数据</span>\n\t\tMyStruct<span class=\"token punctuation\">.</span>Weight<span class=\"token operator\">=</span>ReadRoot<span class=\"token operator\">-></span><span class=\"token function\">GetNumberField</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Weight\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n\t\t<span class=\"token comment\">//获得对象数据</span>\n\t\tTSharedPtr<span class=\"token operator\">&lt;</span>FJsonObject<span class=\"token operator\">></span> TestRoot<span class=\"token operator\">=</span>ReadRoot<span class=\"token operator\">-></span><span class=\"token function\">GetObjectField</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Info\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\tMyStruct<span class=\"token punctuation\">.</span>Info<span class=\"token punctuation\">.</span>Name<span class=\"token operator\">=</span>TestRoot<span class=\"token operator\">-></span><span class=\"token function\">GetStringField</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tMyStruct<span class=\"token punctuation\">.</span>Info<span class=\"token punctuation\">.</span>Age<span class=\"token operator\">=</span>TestRoot<span class=\"token operator\">-></span><span class=\"token function\">GetIntegerField</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Age\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\n\t\t<span class=\"token comment\">//获得数组数据</span>\n\t\tTArray<span class=\"token operator\">&lt;</span>TSharedPtr<span class=\"token operator\">&lt;</span>FJsonValue<span class=\"token operator\">>></span>TempArray<span class=\"token operator\">=</span>ReadRoot<span class=\"token operator\">-></span><span class=\"token function\">GetArrayField</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Array\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> <span class=\"token operator\">&amp;</span>i<span class=\"token operator\">:</span>TempArray<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">&#123;</span>\n\t\t\tTSharedPtr<span class=\"token operator\">&lt;</span>FJsonObject<span class=\"token operator\">></span> JsonObj <span class=\"token operator\">=</span> i<span class=\"token operator\">-></span><span class=\"token function\">AsObject</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tFMyInfo TempInfo<span class=\"token punctuation\">;</span>\n\t\t\tTempInfo<span class=\"token punctuation\">.</span>Name<span class=\"token operator\">=</span>JsonObj<span class=\"token operator\">-></span><span class=\"token function\">GetStringField</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tTempInfo<span class=\"token punctuation\">.</span>Age<span class=\"token operator\">=</span>JsonObj<span class=\"token operator\">-></span><span class=\"token function\">GetIntegerField</span><span class=\"token punctuation\">(</span><span class=\"token function\">TEXT</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Age\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tMyStruct<span class=\"token punctuation\">.</span>Array<span class=\"token punctuation\">.</span><span class=\"token function\">Add</span><span class=\"token punctuation\">(</span>TempInfo<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">&#125;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">&#125;</span>\n\t\n\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">&#125;</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>\n</ul>\n","text":"JSON 语法规则 数据在键/值对中 数据由逗号 , 分隔 使用斜杆来转义 \\ 字符 大括号 {} 保存对象 中括号 [] 保存数组，数组可以包含多个对象 JSON 键值对JSON 数据的书写格式是： \"name\" : \"cBao\" JSON 值可以是 数字（整数或浮点数） \"a...","link":"","photos":[],"count_time":{"symbolsCount":"4.5k","symbolsTime":"4 mins."},"categories":[{"name":"Json","slug":"Json","count":1,"path":"api/categories/Json.json"}],"tags":[{"name":"Json","slug":"Json","count":1,"path":"api/tags/Json.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#JSON-%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99\"><span class=\"toc-text\">JSON 语法规则</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#JSON-%E9%94%AE%E5%80%BC%E5%AF%B9\"><span class=\"toc-text\">JSON 键值对</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#JSON-%E5%80%BC%E5%8F%AF%E4%BB%A5%E6%98%AF\"><span class=\"toc-text\">JSON 值可以是</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#UE5%E4%B8%AD%E5%B0%86%E7%BB%93%E6%9E%84%E4%BD%93%E8%BD%AC%E6%8D%A2%E6%88%90Json%E7%A4%BA%E4%BE%8B\"><span class=\"toc-text\">UE5中将结构体转换成Json示例</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#UE5%E4%B8%AD%E5%B0%86Json%E8%BD%AC%E6%8D%A2%E6%88%90%E7%BB%93%E6%9E%84%E4%BD%93%E7%A4%BA%E4%BE%8B\"><span class=\"toc-text\">UE5中将Json转换成结构体示例</span></a></li></ol>","author":{"name":"cBao","slug":"blog-author","avatar":"https://cbaoblog.oss-cn-shanghai.aliyuncs.com/HeadPortrait.jpg","link":"/","description":"但求日积月累，收获于细微。<br /><b>虚幻引擎开发</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"UE中内存操作","uid":"62bbf97645975b25a08d1c093027a65e","slug":"UE内存操作","date":"2022-08-04T07:41:08.000Z","updated":"2022-08-04T09:35:57.502Z","comments":true,"path":"api/articles/UE内存操作.json","keywords":null,"cover":"https://cbaoblog.oss-cn-shanghai.aliyuncs.com/UE5LOGO.png","text":"分配内存// C uint8* Ptr_C=(uint8*)malloc(sizeof(uint8)*1024); // C++ uint8* Ptr_CPlus=new uint8[1024]; // UEC++ uint8* Ptr_UnrealCPlus=(uint8*)F...","link":"","photos":[],"count_time":{"symbolsCount":"1.8k","symbolsTime":"2 mins."},"categories":[{"name":"UnrealEngine","slug":"UnrealEngine","count":5,"path":"api/categories/UnrealEngine.json"}],"tags":[{"name":"内存操作","slug":"内存操作","count":1,"path":"api/tags/内存操作.json"}],"author":{"name":"cBao","slug":"blog-author","avatar":"https://cbaoblog.oss-cn-shanghai.aliyuncs.com/HeadPortrait.jpg","link":"/","description":"但求日积月累，收获于细微。<br /><b>虚幻引擎开发</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"UE串口通信","uid":"32edd7bc4a69fac72c5e2e1809026b07","slug":"UE串口通信","date":"2022-07-22T08:14:36.000Z","updated":"2022-07-22T08:31:35.612Z","comments":true,"path":"api/articles/UE串口通信.json","keywords":null,"cover":"https://cbaoblog.oss-cn-shanghai.aliyuncs.com/UE5LOGO.png","text":"sdasfsa UE串口通信 .h文件 #pragma once #define FC_DTRDSR 0x01 #define FC_RTSCTS 0x02 #define FC_XONXOFF 0x04 #define ASCII_BEL 0x07 #define ASCII_...","link":"","photos":[],"count_time":{"symbolsCount":"20k","symbolsTime":"18 mins."},"categories":[{"name":"UnrealEngine","slug":"UnrealEngine","count":5,"path":"api/categories/UnrealEngine.json"}],"tags":[{"name":"串口通信","slug":"串口通信","count":1,"path":"api/tags/串口通信.json"}],"author":{"name":"cBao","slug":"blog-author","avatar":"https://cbaoblog.oss-cn-shanghai.aliyuncs.com/HeadPortrait.jpg","link":"/","description":"但求日积月累，收获于细微。<br /><b>虚幻引擎开发</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}